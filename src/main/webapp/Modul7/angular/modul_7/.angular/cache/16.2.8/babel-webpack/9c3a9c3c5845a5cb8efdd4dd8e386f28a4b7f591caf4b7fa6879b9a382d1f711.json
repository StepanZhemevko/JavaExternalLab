{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nexport let CouponComponent = class CouponComponent {\n  scrollToTop() {\n    window.scrollTo(0, 0);\n  }\n  constructor(router, userService) {\n    this.router = router;\n    this.userService = userService;\n    this.coupons = [];\n    this.searchTerm = '';\n    this.filteredCoupons = [];\n    this.infiniteScrollActive = false;\n    this.windowScrolled = false;\n  }\n  ngOnInit() {\n    window.addEventListener('scroll', () => {\n      this.windowScrolled = window.pageYOffset !== 0;\n      this.checkInfiniteScroll();\n    });\n    this.userName = this.userService.getUserName();\n    console.log('Username:', this.userName);\n    this.filteredCoupons = this.coupons;\n  }\n  ngOnChanges(changes) {\n    if (changes.coupons) {\n      if (this.infiniteScrollActive) {\n        this.filteredCoupons.push(...this.coupons);\n        this.infiniteScrollActive = false;\n      } else {\n        this.filteredCoupons = this.coupons;\n      }\n    }\n  }\n  search() {\n    const searchTerm = this.searchTerm.toLowerCase();\n    this.filteredCoupons = this.coupons.filter(coupon => {\n      const name = coupon.name.toLowerCase();\n      return name.includes(searchTerm);\n    });\n  }\n  checkInfiniteScroll() {\n    const scrollHeight = document.documentElement.scrollHeight;\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    const clientHeight = document.documentElement.clientHeight;\n    const scrollThreshold = 100;\n    if (scrollHeight - (scrollTop + clientHeight) < scrollThreshold) {\n      this.infiniteScrollActive = true;\n    }\n  }\n  redirectToOrder(coupon) {\n    this.router.navigate(['/order', coupon]);\n  }\n};\n__decorate([Input()], CouponComponent.prototype, \"coupons\", void 0);\nCouponComponent = __decorate([Component({\n  selector: 'app-coupon',\n  templateUrl: './coupon.component.html',\n  styleUrls: ['./coupon.component.css']\n})], CouponComponent);","map":{"version":3,"names":["Component","Input","CouponComponent","scrollToTop","window","scrollTo","constructor","router","userService","coupons","searchTerm","filteredCoupons","infiniteScrollActive","windowScrolled","ngOnInit","addEventListener","pageYOffset","checkInfiniteScroll","userName","getUserName","console","log","ngOnChanges","changes","push","search","toLowerCase","filter","coupon","name","includes","scrollHeight","document","documentElement","scrollTop","clientHeight","scrollThreshold","redirectToOrder","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Steve\\IdeaProjects\\Task2\\src\\main\\webapp\\Modul7\\angular\\modul_7\\src\\app\\shared\\components\\coupon\\coupon.component.ts"],"sourcesContent":["import { Component, Input, OnInit, OnChanges, SimpleChanges } from '@angular/core';\nimport { Router } from '@angular/router';\n\ninterface Coupon {\n  name: string;\n  description: string;\n  price: number;\n  lastUpdateData: string;\n}\n\n@Component({\n  selector: 'app-coupon',\n  templateUrl: './coupon.component.html',\n  styleUrls: ['./coupon.component.css']\n})\nexport class CouponComponent implements OnInit, OnChanges {\n  @Input() coupons: Coupon[] = [];\n  searchTerm: string = '';\n  filteredCoupons: Coupon[] = [];\n\n  infiniteScrollActive = false;\n\n  scrollToTop(): void {\n    window.scrollTo(0, 0);\n  }\n\n  windowScrolled = false;\n\n  constructor(private router: Router, private userService: UserService) {}\n\n  ngOnInit() {\n    window.addEventListener('scroll', () => {\n      this.windowScrolled = window.pageYOffset !== 0;\n      this.checkInfiniteScroll();\n    });\n    this.userName = this.userService.getUserName();\n    console.log('Username:', this.userName);\n    this.filteredCoupons = this.coupons;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if ((changes as any).coupons) {\n      if (this.infiniteScrollActive) {\n        this.filteredCoupons.push(...this.coupons);\n        this.infiniteScrollActive = false;\n      } else {\n        this.filteredCoupons = this.coupons;\n      }\n    }\n  }\n\n  search() {\n    const searchTerm = this.searchTerm.toLowerCase();\n\n    this.filteredCoupons = this.coupons.filter(coupon => {\n      const name = coupon.name.toLowerCase();\n      return name.includes(searchTerm);\n    });\n  }\n\n  checkInfiniteScroll() {\n    const scrollHeight = document.documentElement.scrollHeight;\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    const clientHeight = document.documentElement.clientHeight;\n\n    const scrollThreshold = 100;\n\n    if (scrollHeight - (scrollTop + clientHeight) < scrollThreshold) {\n      this.infiniteScrollActive = true;\n    }\n  }\n\n  redirectToOrder(coupon: Coupon) {\n    this.router.navigate(['/order', coupon]);\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,KAAK,QAA0C,eAAe;AAe3E,WAAMC,eAAe,GAArB,MAAMA,eAAe;EAO1BC,WAAWA,CAAA;IACTC,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;EACvB;EAIAC,YAAoBC,MAAc,EAAUC,WAAwB;IAAhD,KAAAD,MAAM,GAANA,MAAM;IAAkB,KAAAC,WAAW,GAAXA,WAAW;IAZ9C,KAAAC,OAAO,GAAa,EAAE;IAC/B,KAAAC,UAAU,GAAW,EAAE;IACvB,KAAAC,eAAe,GAAa,EAAE;IAE9B,KAAAC,oBAAoB,GAAG,KAAK;IAM5B,KAAAC,cAAc,GAAG,KAAK;EAEiD;EAEvEC,QAAQA,CAAA;IACNV,MAAM,CAACW,gBAAgB,CAAC,QAAQ,EAAE,MAAK;MACrC,IAAI,CAACF,cAAc,GAAGT,MAAM,CAACY,WAAW,KAAK,CAAC;MAC9C,IAAI,CAACC,mBAAmB,EAAE;IAC5B,CAAC,CAAC;IACF,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACV,WAAW,CAACW,WAAW,EAAE;IAC9CC,OAAO,CAACC,GAAG,CAAC,WAAW,EAAE,IAAI,CAACH,QAAQ,CAAC;IACvC,IAAI,CAACP,eAAe,GAAG,IAAI,CAACF,OAAO;EACrC;EAEAa,WAAWA,CAACC,OAAsB;IAChC,IAAKA,OAAe,CAACd,OAAO,EAAE;MAC5B,IAAI,IAAI,CAACG,oBAAoB,EAAE;QAC7B,IAAI,CAACD,eAAe,CAACa,IAAI,CAAC,GAAG,IAAI,CAACf,OAAO,CAAC;QAC1C,IAAI,CAACG,oBAAoB,GAAG,KAAK;OAClC,MAAM;QACL,IAAI,CAACD,eAAe,GAAG,IAAI,CAACF,OAAO;;;EAGzC;EAEAgB,MAAMA,CAAA;IACJ,MAAMf,UAAU,GAAG,IAAI,CAACA,UAAU,CAACgB,WAAW,EAAE;IAEhD,IAAI,CAACf,eAAe,GAAG,IAAI,CAACF,OAAO,CAACkB,MAAM,CAACC,MAAM,IAAG;MAClD,MAAMC,IAAI,GAAGD,MAAM,CAACC,IAAI,CAACH,WAAW,EAAE;MACtC,OAAOG,IAAI,CAACC,QAAQ,CAACpB,UAAU,CAAC;IAClC,CAAC,CAAC;EACJ;EAEAO,mBAAmBA,CAAA;IACjB,MAAMc,YAAY,GAAGC,QAAQ,CAACC,eAAe,CAACF,YAAY;IAC1D,MAAMG,SAAS,GAAG9B,MAAM,CAACY,WAAW,IAAIgB,QAAQ,CAACC,eAAe,CAACC,SAAS;IAC1E,MAAMC,YAAY,GAAGH,QAAQ,CAACC,eAAe,CAACE,YAAY;IAE1D,MAAMC,eAAe,GAAG,GAAG;IAE3B,IAAIL,YAAY,IAAIG,SAAS,GAAGC,YAAY,CAAC,GAAGC,eAAe,EAAE;MAC/D,IAAI,CAACxB,oBAAoB,GAAG,IAAI;;EAEpC;EAEAyB,eAAeA,CAACT,MAAc;IAC5B,IAAI,CAACrB,MAAM,CAAC+B,QAAQ,CAAC,CAAC,QAAQ,EAAEV,MAAM,CAAC,CAAC;EAC1C;CACD;AA3DUW,UAAA,EAARtC,KAAK,EAAE,C,+CAAwB;AADrBC,eAAe,GAAAqC,UAAA,EAL3BvC,SAAS,CAAC;EACTwC,QAAQ,EAAE,YAAY;EACtBC,WAAW,EAAE,yBAAyB;EACtCC,SAAS,EAAE,CAAC,wBAAwB;CACrC,CAAC,C,EACWxC,eAAe,CA4D3B"},"metadata":{},"sourceType":"module","externalDependencies":[]}