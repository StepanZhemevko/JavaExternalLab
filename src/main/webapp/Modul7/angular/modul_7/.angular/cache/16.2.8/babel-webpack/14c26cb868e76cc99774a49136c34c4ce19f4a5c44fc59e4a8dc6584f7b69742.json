{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/shared/services/data.service\";\nimport * as i2 from \"../../../shared/components/coupon/coupon.component\";\nexport class DashboardComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.coupons = [];\n    this.page = 1;\n    this.searchTerm = '';\n    this.filteredCoupons = [];\n  }\n  ngOnInit() {\n    this.fetchData();\n  }\n  onWindowScroll() {\n    if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\n      this.page++;\n      this.fetchData();\n    }\n  }\n  fetchData() {\n    this.dataService.getDataByService(this.page).subscribe(res => {\n      this.coupons.push(...res);\n      // Set filteredCoupons to all coupons initially\n      this.filteredCoupons = this.coupons;\n    });\n  }\n  search() {\n    const searchTerm = this.searchTerm.toLowerCase();\n    this.filteredCoupons = this.coupons.filter(coupon => {\n      const name = coupon.name.toLowerCase();\n      return name.includes(searchTerm);\n    });\n  }\n  static #_ = this.ɵfac = function DashboardComponent_Factory(t) {\n    return new (t || DashboardComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DashboardComponent,\n    selectors: [[\"app-dashboard\"]],\n    hostBindings: function DashboardComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"scroll\", function DashboardComponent_scroll_HostBindingHandler($event) {\n          return ctx.onWindowScroll($event);\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 3,\n    vars: 2,\n    consts: [[\"type\", \"text\", \"placeholder\", \"Search by Name\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [3, \"coupons\"]],\n    template: function DashboardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\")(1, \"input\", 0);\n        i0.ɵɵlistener(\"ngModelChange\", function DashboardComponent_Template_input_ngModelChange_1_listener($event) {\n          return ctx.searchTerm = $event;\n        })(\"input\", function DashboardComponent_Template_input_input_1_listener() {\n          return ctx.search();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(2, \"app-coupon\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.searchTerm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"coupons\", ctx.filteredCoupons);\n      }\n    },\n    dependencies: [i2.CouponComponent],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["DashboardComponent","constructor","dataService","coupons","page","searchTerm","filteredCoupons","ngOnInit","fetchData","onWindowScroll","window","innerHeight","scrollY","document","body","offsetHeight","getDataByService","subscribe","res","push","search","toLowerCase","filter","coupon","name","includes","_","i0","ɵɵdirectiveInject","i1","DataService","_2","selectors","hostBindings","DashboardComponent_HostBindings","rf","ctx","$event","ɵɵresolveWindow","ɵɵelementStart","ɵɵlistener","DashboardComponent_Template_input_ngModelChange_1_listener","DashboardComponent_Template_input_input_1_listener","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty"],"sources":["C:\\Users\\Steve\\IdeaProjects\\Task2\\src\\main\\webapp\\Modul7\\angular\\modul_7\\src\\app\\my-module\\components\\dashboard\\dashboard.component.ts","C:\\Users\\Steve\\IdeaProjects\\Task2\\src\\main\\webapp\\Modul7\\angular\\modul_7\\src\\app\\my-module\\components\\dashboard\\dashboard.component.html"],"sourcesContent":["// dashboard.component.ts\nimport { Component, OnInit, HostListener } from '@angular/core';\nimport { DataService } from 'src/app/shared/services/data.service';\n\n@Component({\n  selector: 'app-dashboard',\n  templateUrl: './dashboard.component.html',\n  styleUrls: ['./dashboard.component.css']\n})\nexport class DashboardComponent implements OnInit {\n  coupons: any[] = [];\n  page = 1;\n  searchTerm: string = '';\n  filteredCoupons: any[] = [];\n\n  constructor(private dataService: DataService) {}\n\n  ngOnInit() {\n    this.fetchData();\n  }\n\n  @HostListener('window:scroll', ['$event'])\n  onWindowScroll() {\n    if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight) {\n      this.page++;\n      this.fetchData();\n    }\n  }\n\n  fetchData() {\n    this.dataService.getDataByService(this.page).subscribe((res: any) => {\n      this.coupons.push(...res);\n      // Set filteredCoupons to all coupons initially\n      this.filteredCoupons = this.coupons;\n    });\n  }\n\n  search() {\n    const searchTerm = this.searchTerm.toLowerCase();\n\n    this.filteredCoupons = this.coupons.filter(coupon => {\n      const name = coupon.name.toLowerCase();\n      return name.includes(searchTerm);\n    });\n  }\n}\n","<!-- dashboard.component.html -->\n\n<div>\n  <input type=\"text\" [(ngModel)]=\"searchTerm\" placeholder=\"Search by Name\" (input)=\"search()\">\n</div>\n\n<app-coupon [coupons]=\"filteredCoupons\"></app-coupon>\n"],"mappings":";;;AASA,OAAM,MAAOA,kBAAkB;EAM7BC,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;IAL/B,KAAAC,OAAO,GAAU,EAAE;IACnB,KAAAC,IAAI,GAAG,CAAC;IACR,KAAAC,UAAU,GAAW,EAAE;IACvB,KAAAC,eAAe,GAAU,EAAE;EAEoB;EAE/CC,QAAQA,CAAA;IACN,IAAI,CAACC,SAAS,EAAE;EAClB;EAGAC,cAAcA,CAAA;IACZ,IAAKC,MAAM,CAACC,WAAW,GAAGD,MAAM,CAACE,OAAO,IAAKC,QAAQ,CAACC,IAAI,CAACC,YAAY,EAAE;MACvE,IAAI,CAACX,IAAI,EAAE;MACX,IAAI,CAACI,SAAS,EAAE;;EAEpB;EAEAA,SAASA,CAAA;IACP,IAAI,CAACN,WAAW,CAACc,gBAAgB,CAAC,IAAI,CAACZ,IAAI,CAAC,CAACa,SAAS,CAAEC,GAAQ,IAAI;MAClE,IAAI,CAACf,OAAO,CAACgB,IAAI,CAAC,GAAGD,GAAG,CAAC;MACzB;MACA,IAAI,CAACZ,eAAe,GAAG,IAAI,CAACH,OAAO;IACrC,CAAC,CAAC;EACJ;EAEAiB,MAAMA,CAAA;IACJ,MAAMf,UAAU,GAAG,IAAI,CAACA,UAAU,CAACgB,WAAW,EAAE;IAEhD,IAAI,CAACf,eAAe,GAAG,IAAI,CAACH,OAAO,CAACmB,MAAM,CAACC,MAAM,IAAG;MAClD,MAAMC,IAAI,GAAGD,MAAM,CAACC,IAAI,CAACH,WAAW,EAAE;MACtC,OAAOG,IAAI,CAACC,QAAQ,CAACpB,UAAU,CAAC;IAClC,CAAC,CAAC;EACJ;EAAC,QAAAqB,CAAA,G;qBAnCU1B,kBAAkB,EAAA2B,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,WAAA;EAAA;EAAA,QAAAC,EAAA,G;UAAlB/B,kBAAkB;IAAAgC,SAAA;IAAAC,YAAA,WAAAC,gCAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;iBAAlBC,GAAA,CAAA3B,cAAA,CAAA4B,MAAA,CAAsB;QAAA,UAAAV,EAAA,CAAAW,eAAA;;;;;;;;QCPnCX,EAAA,CAAAY,cAAA,UAAK;QACgBZ,EAAA,CAAAa,UAAA,2BAAAC,2DAAAJ,MAAA;UAAA,OAAAD,GAAA,CAAA/B,UAAA,GAAAgC,MAAA;QAAA,EAAwB,mBAAAK,mDAAA;UAAA,OAAuCN,GAAA,CAAAhB,MAAA,EAAQ;QAAA,EAA/C;QAA3CO,EAAA,CAAAgB,YAAA,EAA4F;QAG9FhB,EAAA,CAAAiB,SAAA,oBAAqD;;;QAHhCjB,EAAA,CAAAkB,SAAA,GAAwB;QAAxBlB,EAAA,CAAAmB,UAAA,YAAAV,GAAA,CAAA/B,UAAA,CAAwB;QAGjCsB,EAAA,CAAAkB,SAAA,GAA2B;QAA3BlB,EAAA,CAAAmB,UAAA,YAAAV,GAAA,CAAA9B,eAAA,CAA2B"},"metadata":{},"sourceType":"module","externalDependencies":[]}